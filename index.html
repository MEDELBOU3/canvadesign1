<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-adsense-account" content="ca-pub-1313515613759764">
    <title>Advanced Shape Editor</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/4.5.0/fabric.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1313515613759764"
     crossorigin="anonymous"></script>
     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paper.js/0.12.11/paper-full.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/4.4.0/fabric.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/whammy/0.2.1/whammy.min.js"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/2.3.1/purify.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link href="https://boxicons.com/css/boxicons.min.css" rel="stylesheet">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@iconify/iconify@3.0.1/dist/iconify.min.js">
     <link rel="icon" href="simo.png" type="image/png">
    <style>

        @import url('https://fonts.googleapis.com/css2?family=Anton&family=Big+Shoulders+Inline+Text:wght@100..900&family=Carter+One&family=Foldit:wght@100..900&family=Nosifer&family=Plaster&family=Titan+One&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Anton&family=Big+Shoulders+Inline+Text:wght@100..900&family=Carter+One&family=Foldit:wght@100..900&family=Nosifer&family=Titan+One&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Anton&family=Big+Shoulders+Inline+Text:wght@100..900&family=Carter+One&family=Foldit:wght@100..900&family=Titan+One&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Anton&family=Big+Shoulders+Inline+Text:wght@100..900&family=Carter+One&family=Titan+One&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Anton&family=Carter+One&family=Titan+One&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Anton&family=Carter+One&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Alkalami&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Alkalami&family=Blaka+Hollow&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Alkalami&family=Blaka+Hollow&family=Blaka+Ink&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Alkalami&family=Blaka+Hollow&family=Blaka+Ink&family=Qahiri&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Alkalami&family=Blaka+Hollow&family=Blaka+Ink&family=Noto+Sans+Arabic:wght@100..900&family=Qahiri&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Alkalami&family=Blaka+Hollow&family=Blaka+Ink&family=Noto+Sans+Arabic:wght@100..900&family=Qahiri&family=Ruwudu:wght@400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Alkalami&family=Blaka+Hollow&family=Blaka+Ink&family=Lemonada:wght@300..700&family=Noto+Sans+Arabic:wght@100..900&family=Qahiri&family=Ruwudu:wght@400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Alkalami&family=Blaka+Hollow&family=Blaka+Ink&family=Lemonada:wght@300..700&family=Noto+Sans+Arabic:wght@100..900&family=Qahiri&family=Reem+Kufi:wght@400..700&family=Ruwudu:wght@400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Alkalami&family=Blaka+Hollow&family=Blaka+Ink&family=Briem+Hand:wght@100..900&family=Lemonada:wght@300..700&family=Noto+Sans+Arabic:wght@100..900&family=Qahiri&family=Reem+Kufi:wght@400..700&family=Ruwudu:wght@400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Alkalami&family=Blaka+Hollow&family=Blaka+Ink&family=Briem+Hand:wght@100..900&family=Jacquard+24+Charted&family=Lemonada:wght@300..700&family=Noto+Sans+Arabic:wght@100..900&family=Qahiri&family=Reem+Kufi:wght@400..700&family=Ruwudu:wght@400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Alkalami&family=Blaka+Hollow&family=Blaka+Ink&family=Briem+Hand:wght@100..900&family=Jacquard+24+Charted&family=Lemonada:wght@300..700&family=Noto+Sans+Arabic:wght@100..900&family=Qahiri&family=Reem+Kufi:wght@400..700&family=Ruwudu:wght@400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Alkalami&family=Bebas+Neue&family=Blaka+Hollow&family=Blaka+Ink&family=Briem+Hand:wght@100..900&family=Jacquard+24+Charted&family=Lemonada:wght@300..700&family=Noto+Sans+Arabic:wght@100..900&family=Pacifico&family=Qahiri&family=Reem+Kufi:wght@400..700&family=Ruwudu:wght@400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Alkalami&family=Bebas+Neue&family=Blaka+Hollow&family=Blaka+Ink&family=Briem+Hand:wght@100..900&family=Jacquard+24+Charted&family=Lemonada:wght@300..700&family=Lobster&family=Noto+Sans+Arabic:wght@100..900&family=Pacifico&family=Qahiri&family=Reem+Kufi:wght@400..700&family=Ruwudu:wght@400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Alkalami&family=Bebas+Neue&family=Blaka+Hollow&family=Blaka+Ink&family=Briem+Hand:wght@100..900&family=Jacquard+24&family=Jacquard+24+Charted&family=Lemonada:wght@300..700&family=Lobster&family=Noto+Sans+Arabic:wght@100..900&family=Pacifico&family=Qahiri&family=Reem+Kufi:wght@400..700&family=Ruwudu:wght@400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Alkalami&family=Bebas+Neue&family=Blaka+Hollow&family=Blaka+Ink&family=Briem+Hand:wght@100..900&family=Jacquard+24&family=Jacquard+24+Charted&family=Lemonada:wght@300..700&family=Lobster&family=Noto+Sans+Arabic:wght@100..900&family=Orbitron:wght@400..900&family=Pacifico&family=Qahiri&family=Reem+Kufi:wght@400..700&family=Ruwudu:wght@400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Alkalami&family=Amatic+SC:wght@400;700&family=Bebas+Neue&family=Blaka+Hollow&family=Blaka+Ink&family=Briem+Hand:wght@100..900&family=Jacquard+24&family=Jacquard+24+Charted&family=Lemonada:wght@300..700&family=Lobster&family=Noto+Sans+Arabic:wght@100..900&family=Orbitron:wght@400..900&family=Pacifico&family=Qahiri&family=Reem+Kufi:wght@400..700&family=Ruwudu:wght@400;500;600;700&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Alkalami&family=Amatic+SC:wght@400;700&family=Bebas+Neue&family=Black+Ops+One&family=Blaka+Hollow&family=Blaka+Ink&family=Briem+Hand:wght@100..900&family=Jacquard+24&family=Jacquard+24+Charted&family=Lemonada:wght@300..700&family=Lobster&family=Noto+Sans+Arabic:wght@100..900&family=Orbitron:wght@400..900&family=Pacifico&family=Qahiri&family=Reem+Kufi:wght@400..700&family=Ruwudu:wght@400;500;600;700&display=swap');
        body {
            background-color: #333;
        }
 header {
           color: #fff;
           font-size: 40px;
           text-align: center;
        }
        
        canvas {
             border: 1px solid rgb(255, 255, 255);
            margin-left: 35%;
            width: 800px;
            height: 90%;
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
        }
        button {
            border-radius: 10px;
            padding: 10px;
            padding-top: 6px;
            padding-bottom: 10px;
            border: 1px solid rgb(99, 99, 99);
            font-size: 16px;
            box-shadow: 0 0 1px rgb(184, 184, 184);
            background-color: rgb(94, 92, 92);
            color: #fff;
        }
         button:hover {
             background-color: rgba(0, 0, 0, 0.534);
             border: 2px solid;
             border-color: black whit black white;
        }
        input { 
            border-radius: 5px;
            background-color: transparent;
            color: azure;
        }
        option {  
            background-color: rgb(0, 130, 252);
            color: azure;
        }
        .Menu { 
            padding: 10px;
            padding-top: 6px;
            padding-bottom: 10px;
            margin-top: 20px;
            border: none;
            box-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
            background-color: rgb(98, 98, 98);
            border-raduis: 10px;
            backdrop-filter: blur(10px);
        }

       .popup-container {
            position: fixed;
            top: 50%;
            left: 50%;
            
            transform: translate(-50%, -50%);
            background-color: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
            z-index: 1000;
          }
          .popup-container i {
           font-size: 45px;
           border-radius: 50%;
          }
          .popup-container i:hover {
            background-color: cyan;
           }
          .popup-close {
            position: absolute;
            top: 5px;
            right: 5px;
            font-size: 45px;
            cursor: pointer;
          }
        #fontType option{
            background-color: rgba(0, 0, 0, 0.5);
            border-raduis: 10px;
            color: white;
          }
        
       /* تخصيص شريط التمرير لعنصر select */
select::-webkit-scrollbar {
    width: 8px; /* ضبط عرض شريط التمرير */
}

select::-webkit-scrollbar-track {
    background: transparent; /* جعل خلفية المسار شفافة */
}

select::-webkit-scrollbar-thumb {
    background: #888; /* لون الشريحة */
    border-radius: 4px; /* جعل حواف الشريحة مستديرة */
}

select::-webkit-scrollbar-thumb:hover {
    background: #555; /* لون الشريحة عند التحويم */
}

       footer {
           background-color: black;
           color: #fff;
           padding: 40px 0;
           margin-top: 280px;
           box-shadow: 0px 0 px -5px 10px rgba(0, 0, 0, 0.5);
       }

      footer .social {
         float: left;
  
          
      }
     footer .social {
         color:#fff;
         margin-right: 15px;
         font-size: 28px;
          
      }
      
     footer .copy {
       float: right;
         
     }

    footer .copy p {
       margin: 0;
       color: #fff;
       font-size: 18px;
        
    }
         .filters {
             margin-top: -60%;
             flex-direction: column;
             position: absolute;
             max-width: 250px;
             padding: 10px;
             margin-bottom: 10px;
             background-color: rgb(100, 100, 100);
             z-index: 1;
             box-shadow: 0 0 10px rgba(255, 255, 255, 0.158);
          }
          .filters select{
            margin-top: -30px;
            border-radius: 5px;
            height: 25px;
            width: 120px;
            border: none;
            outline: none;
            cursor: pointer;
         }
         #filterType option{
             border-radius: 5px;
             background-color: #3a3a3a;
         }
         select:hover{
            background-color: rgba(185, 185, 185, 0.534);
        }
        #filterType option:focus{
            background-color: rgba(94, 92, 92, 0.534);
        }
        .filterControls input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            margin-top: 20px;
            border-radius: 5px;
            background: #ffffff;
            outline: none;
            opacity: 0.7;
            -webkit-transition: .2s;
            transition: opacity .2s;
        }
    
        /* تغيير لون المؤشر عند التحريك */
        .filterControls input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid rgb(56, 56, 56);
            background: #000000;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.767);
        }
    
        .filterControls input[type="range"]::-webkit-slider-thumb:hover {
            background-color: rgb(255, 242, 128);
        }

        .filterControls input[type="range"]::-moz-range-thumb {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            border: 2px solid #fff;
            background: #000000;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.699);
        } 
    
          .filters button{
            margin-top: 15px;
           font-size: 15px;
            border: 1px solid #fff;
         }
         .filters button:hover{
            background-color: #3a3a3a;
            transition: .3s cubic-bezier(0.755, 0.05, 0.855, 0.06);
         }

        .gallery {
            width: 250px;
            height: 620px;
            margin-left: 81.5%;
            margin-top: -63.7%;
            background-color: rgba(0, 0, 0, 0.5);
            border-raduis: 10px;
            color: white;
            overflow-y: auto; /* إضافة ممر عمودي */
          }
          .gallery h1{
            padding: 10px;
          }
          .gallery img{
            height: 280px;
            width: 200px;
            margin-left: 20px;
            padding: 10px;
            border-radius: 10px;
            filter: drop-shadow(0 0 10px rgb(69 69 69 ));
          }
          .play{
            margin-top: -47%;
             flex-direction: column;
             position: absolute;
             width: 250px;
             padding: 10px;
             margin-bottom: 10px;
             background-color: rgb(100, 100, 100);
             z-index: 1;
             box-shadow: 0 0 10px rgba(255, 255, 255, 0.158);
          }
          .play h1{
             color: rgb(0, 0, 0);
             font-size: 30px;
          }
          #previewButton{
            height: 45px;
            width: 45px;
            background-color: #000000;
            z-index: 1;
            position: absolute;
            margin-top: -20%;
            margin-left: 55%;
            display: flex; 
            justify-content: center;
            color: #ffffff;
            border: none;
            border-radius: 50%;
            box-shadow: 0 0 10px rgb(255, 255, 255);
          }
          #previewButton:hover{
            background-color: #3a3a3a;
          }
       
          #previewCard {
            max-width: 90%;
            max-height: 90%;
            margin-right: 10%;
            overflow: auto;
            padding: 20px;
            z-index: 1;
            position: absolute;
        }
        #closbutton{
            background-color: #3a3a3a;
            margin-top: -74%;
            z-index: 1;
            position: absolute;
        }
        
        
    </style>
</head>
<body>
 <header>
        <h1>Welcome to My Website</h1>
  
 <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1313515613759764"
     crossorigin="anonymous"></script>
<!-- simads -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-1313515613759764"
     data-ad-slot="9097002997"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
       </header>
  <canvas id="canvas" width="800" height="600"></canvas>
    <div class="Menu">
        <select id="shapeType">
            <option value="square">squar:</option>
            <option value="circle">circle</option>
            <option value="triangle">مثلث: triangle</option>
            <option value="cylinder">Cylinder</option>
            <option value="line">خط : Line</option>
            <option value="arrow">سهم: Arrow</option>
            <option value="pyramid">هرم: Pyramid</option>
        </select>
        <i class='bx bxs-palette' style="font-size: 25px; color:#fff; margin-bottom: 5px;"><input type="color" id="colorPicker"  value="#000000"></i>
        <input type="number" id="sizePicker" min="10" max="200" value="50">
        <input type="range" id="opacitySlider" min="0" max="1" step="0.1" value="1">
        <button onclick="addShape()"><i class='bx bxs-shapes' style=" color:rgba(0, 0, 0, 0.87); font-size: 25px; filter: drop-shadow(0 0 10px gray)"></i></button>
        <input type="file" id="imageUploader" accept="image/png">
        <input type="file" id="videoUploader" accept="video/mp4">
        <button onclick="addImage()"><i class='bx bx-image-add' style="font-size: 25px; color:#fff;"></i></button>
        <button onclick="addVideo()"><i class='bx bx-video-plus' style="font-size: 25px; color:#fff;"></i></button>
        <input type="text" id="text" placeholder="Text...">
        <button onclick="addText()"> + <i class='bx bx-text' style='color:#ffffff; font-size: 25px;' ></i> </button>
       
        
        <select id="fontType" >
            <option style="color: black;">English</option>
            <option value="Arial">Arial</option>
            <option value="Verdana">Verdana</option>
            <option value="Tahoma">Tahoma</option>
            <option value="Trebuchet MS">Trebuchet MS</option>
            <option value="Times New Roman">Times New Roman</option>
            <option value="Foldit">Foldit</option>
            <option value="Nosifer">Nosifer</option>
            <option value="Plaster">Plaster</option>
            <option value="Anton">Anton</option>
            <option value="Big Shoulders Inline Text">Big Shoulders Inline Text</option>
            <option value="Carter One">Carter One</option>
            <option value="Titan One">Titan One</option>
            <option value="Briem Hand">Briem Hand</option>
            <option value="Reem Kufi">Reem Kufi</option>
            <option value="Jacquard 24 Charted">Jacquard 24 Charted</option>
            <option value="Bebas Neue">Bebas Neue</option>
            <option value=" Pacifico">Pacifico</option>
            <option value="Lobster">Lobster</option>
            <option value=" Amatic SC">Amatic SC</option>
            <option value="Jacquard 24">Jacquard 24</option>
            <option value="Orbitron">Orbitron</option>
            <option value="Black Ops One">Black Ops One</option>
            <option style="color: black;">عربي</option>
             <option value="Alkalami">Alkalami</option>
             <option value="Blaka Hollow">Blaka Hollow</option>
             <option value="Blaka Ink">Blaka Ink</option>
             <option value="Qahiri">Qahiri</option>
             <option value="Alkalami">Alkalami</option>
             <option value="Noto Sans Arabic">Noto Sans Arabic</option> 
             <option value=" Ruwudu"> Ruwudu</option>
             <option value="Lemonada">Lemonada</option>
              <option value="Reem Kufi">Reem Kufi</option>
        </select>
        
        <button onclick="setFont()">تعيين الخط</button>
        <select id="animationType">
            <option value="scale">تغيير المقياس</option>
            <option value="opacity">تغيير الشفافية</option>
            <option value="top">تحريك لأعلى</option>
            <option value="left">تحريك للجوانب</option>
            <option value="flipX">اقلب أفقيا</option>
            <option value="bounce">التذبذب</option>
            <option value="shake">الهز</option>
        </select>
        <button onclick="animateShape()">تشغيل الانيميشن</button>
        <input type="file" id="designUploader" accept=".json">
        <button onclick="loadDesign()">تحميل التصميم</button>
        <input type="color" id="backgroundPicker" value="#ffffff">
        <button onclick="changeBackgroundColor()">تغيير لون الخلفية</button>
        <button onclick="moveUp()"><i class='bx bx-layer-plus' style='color:#ffffff; font-size: 25px;' ></i></button>
        <button onclick="moveDown()"><i class='bx bx-layer-minus' style='color:#ffffff; font-size: 25px;'></i></button>
        <button onclick="deleteObject()"><i class='bx bxs-trash' style="font-size: 25px; color:#fff;"></i></button>
        <button onclick="copyObject()"><i class='bx bxs-copy' style="font-size: 25px; color:#fff;"></i></button>
        <button onclick="pasteObject()"><i class='bx bx-paste' style="font-size: 25px; color:#fff;"></i></button>
        <button id="exportButton" onclick="exportDesign()"><i class='bx bxs-file-json' style="font-size: 25px; color:#fff;"></i></button>
        <button id="displayDesignButton" onclick="displayDesign()">عرض التصميم<i class='bx bx-play'></i></button>
        <button id="downloadImageButton" onclick="downloadImage()"><i class='bx bxs-download' style="font-size: 25px; color: rgb(0, 162, 255);"></i> <p style="font-size: 12px;">jpg</p></button>
        <button id="downloadVideoButton" onclick="downloadVideo()"><i class='bx bxs-download' style="font-size: 25px; color: rgb(0, 162, 255);"></i><p style="font-size: 12px;" >Video</p></button>
        <button id="downloadPNGButton" onclick="downloadPNG()"><i class='bx bxs-download' style="font-size: 25px; color: rgb(0, 162, 255);"></i><p style="font-size: 12px;">png</p></button>
        <input type="range" id="brushSize" min="1" max="50" value="10">
        <button onclick="enableBrush()"><i class='bx bxs-paint' style="font-size: 25px; color:#fff;"></i></button>
        <button onclick="enableEraser()"><i class='bx bxs-eraser' style="font-size: 25px; color:#fff;"></i></button>
        <button onclick="undo()"><i class='bx bx-undo' style="font-size: 25px; color:#fff;"></i></button>
        <button onclick="redo()"><i class='bx bx-redo' style="color:#ffffff; font-size: 25px;"></i></button>
        <input type="color" id="lightColorPicker" value="#ffffff">
        <button onclick="addLight()"><i class='bx bxs-bulb' style="font-size: 25px; color:#fff;"></i></button>
        <input type="color" id="shadowColorPicker" value="#000000">
        <button onclick="addShadow()">إضافة ظلال</button>
        <button onclick="breakApart()">تفكيك الشكل</button>
        <button onclick="distortShape()">تشويه الشكل</button>
        <button onclick="makeTextTransparent()">جعل النص فارغًا</button>
        <button onclick="make3D()"><i class='bx bx-cube-alt'></i> تحويل إلى  </button>
    
        <button onclick="togglePopup()">Open Icon Selector</button>

        <div id="popup" class="popup-container" style="display: none;">
          <span class="popup-close" onclick="togglePopup()">&times;</span>
          <h3>Icons <i class='bx bxs-wink-smile'></i></h3>
          <input type="color" id="iconColorPicker" onchange="changeIconColor()">
          <i class="bx bxl-spotify" onclick="selectIcon('bxl-spotify')"></i>
          <i class="bx bxl-facebook" onclick="selectIcon('bxl-facebook')"></i>
          <i class="bx bxl-instagram" onclick="selectIcon('bxl-instagram')"></i>
          <i class="bx bxl-visual-studio" onclick="selectIcon('bxl-visual-studio')" ></i>
          <i class='bx bxl-unity' onclick="selectIcon('bxl-unity')"></i>
          <i class='bx bxl-adobe' onclick="selectIcon('bxl-adobe')"></i>
          <i class='bx bxl-tiktok' onclick="selectIcon('bxl-tiktok')"></i>
          <i class='bx bxl-youtube' onclick="selectIcon('bxl-youtube')"></i>
          <i class='bx bxl-google' onclick="selectIcon('bxl-google')"></i>
          <i class='bx bxl-github'  onclick="selectIcon('bxl-github')"></i>
          <i class='bx bxl-bitcoin'  onclick="selectIcon('bxl-bitcoin')"></i>
          <i class='bx bxl-twitch' onclick="selectIcon('bxl-twitch')"></i>
          <i class='bx bxl-apple' onclick="selectIcon('bxl-apple')"></i>
          <i class='bx bxl-blogger' onclick="selectIcon('bxl-blogger')"></i>
          <i class='bx bxl-pinterest' onclick="selectIcon('bxl-pinterest')"></i>
          <i class='bx bxl-windows' onclick="selectIcon('bxl-windows')"></i>
          <i class='bx bxl-play-store' onclick="selectIcon('bxl-play-stor')"></i>
          <i class='bx bxl-slack-old' onclick="selectIcon('bxl-slack-old')"></i>
          <i class='bx bxl-slack' onclick="selectIcon('bxl-slack')"></i>
          <i class='bx bxl-telegram' onclick="selectIcon('bxl-telegram')"></i>
          <i class='bx bxl-chrome' onclick="selectIcon('bxl-chrome')"></i>
          <i class='bx bxl-wix' onclick="selectIcon('bxl-wix')"></i>
          <i class='bx bxl-blender' onclick="selectIcon('bxl-blender')"></i>
          <i class='bx bxl-tux'onclick="selectIcon('bxl-tux')" ></i>
          <i class='bx bxl-c-plus-plus' onclick="selectIcon('bxl-c-plus-plus')"></i>
          <i class='bx bxl-zoom' onclick="selectIcon('bxl-zoom')"></i>
          <i class='bx bxl-microsoft-teams'onclick="selectIcon('bxl-microsoft-teams')" ></i>
          <i class='bx bxl-snapchat' onclick="selectIcon('bxl-snapchat')"></i>
          <i class='bx bxl-visa' onclick="selectIcon('bxl-visa')"></i>
          <i class='bx bxl-mastercard' onclick="selectIcon('bxl-mastercard')"></i>
          <i class='bx bxl-paypal'onclick="selectIcon('bxl-paypal')" ></i>
          <i class='bx bxl-baidu' onclick="selectIcon('bxl-baidu')"></i>
          <i class='bx bxl-wordpress' onclick="selectIcon('bxl-wordpress')"></i>
          <i class='bx bxl-bing' onclick="selectIcon('bxl-bing')"></i>
          <i class='bx bxl-android' onclick="selectIcon('bxl-android')"></i>
          <i class='bx bxl-creative-commons' onclick="selectIcon('bxl-creative-commons')"></i>
          <i class='bx bxl-messenger'onclick="selectIcon('bxl-messenger')" ></i>
          <i class='bx bx-badge-check' onclick="selectIcon('bx-badge-check')"></i>
          <i class='bx bxs-badge-check' onclick="selectIcon('bxs-badge-check')"></i>
          <i class='bx bxs-badge-dollar' onclick="selectIcon('bxs-badge-dollar')"></i>
          <i class='bx bxs-car' onclick="selectIcon('bxs-car')"></i>
          <i class='bx bx-time-five'  onclick="selectIcon('bx-time-five')"></i>
          <i class='bx bxs-timer' onclick="selectIcon('bxs-timer')" ></i>
          <i class='bx bx-headphone' onclick="selectIcon('bxs-timer')" ></i>
          <i class='bx bxs-microphone' onclick="selectIcon('bxs-microphone')" ></i>
          <i class='bx bxs-phone-call' onclick="selectIcon('bxs-phone-call')" ></i>
          <i class='bx bxs-castle' onclick="selectIcon('bxs-castle')"  ></i>
          <i class='bx bxs-cheese' onclick="selectIcon('bxs-cheese')"></i>
          <i class='bx bxs-lemon' onclick="selectIcon('bxs-lemon')"></i>
          <i class='bx bxs-tree-alt' onclick="selectIcon('bxs-tree-alt')" ></i>
          <i class='bx bxl-mongodb' onclick="selectIcon('bxl-mangodb')"></i>
          <i class='bx bx-run' onclick="selectIcon('bx-run')"></i>
          <i class='bx bx-laugh' onclick="selectIcon('bx-laugh')"></i>
          <i class='bx bxs-happy-heart-eyes'onclick="selectIcon('bxs-happy-heart-eyes')" ></i>
          <i class='bx bx-shocked' onclick="selectIcon('bx-shocked')" ></i>
          <i class='bx bxs-cool'onclick="selectIcon('bxs-cool')"></i>
          <i class='bx bxs-angry'onclick="selectIcon('bxs-angry')"></i>
          <i class='bx bx-wink-tongue'onclick="selectIcon('bx-wink-tongue')"></i>
          <i class='bx bx-moon' onclick="selectIcon('bx-moon')"></i>
          <i class='bx bxs-sun' onclick="selectIcon('bxs-sun')"></i>
          <i class='bx bx-tv' onclick="selectIcon('bx-tv')"></i>
            <i class='bx bxs-music' onclick="selectIcon('bxs-music')"></i>
            <i class='bx bxs-star' onclick="selectIcon('bxs-star')"></i>
            <i class='bx bxs-tennis-ball' onclick="selectIcon('bxs-tennis-ball')"></i>
            <i class='bx bxs-t-shirt' onclick="selectIcon('bxs-t-shirt')"></i>
            <i class='bx bxs-joystick' onclick="selectIcon('bxs-joystick')"></i>
            <i class='bx bxs-flask' onclick="selectIcon('bxs-flask')"></i>
            <i class='bx bxs-baseball' onclick="selectIcon('bxs-baseball')"></i>
            <i class='bx bxs-bus-school' onclick="selectIcon('bxs-bus-school')"></i>
            <i class='bx bxs-ship' onclick="selectIcon('bxs-ship')"></i>
            <i class='bx bxl-periscope' onclick="selectIcon('bxl-periscope')"></i>
            <i class='bx bx-football' onclick="selectIcon('bx-football')"></i>
            <i class='bx bx-wind' onclick="selectIcon('bx-wind')"></i>
            <i class='bx bx-restaurant' onclick="selectIcon('bx-restaurant')"></i>
        </div>
            <input type="file" id="fileInput" accept=".html">
    <button id="loadButton">Load HTML</button>
    </div>  
   
    <div class="filters">
        <div class="filterControls">
            <h1>Filters for img</h1>
            <select id="filterType">
                <option value="sepia">Sepia</option>
                <option value="blur">Blur</option>
                <option value="shadow">Shadow</option>
                <option value="darkness">Darkness</option>
            </select>
            <input type="range" id="filterValue" min="1" max="10" value="5">
            <button onclick="applyFilter()">Apply Filter</button>
        </div>
    </div>
       
   <div class="gallery" id="gallery">
        <h1>Backrounds</h1>
        <img src="paper.jpg" onclick="setBackground('paper.jpg')" />
        <img src="tableau.jpg" onclick="setBackground('tableau.jpg')" />
        <img src="fellies.jpg" onclick="setBackground('fellies.jpg')" />
        <img src="fiagra.jpg" onclick="setBackground('fiagra.jpg')" />
        <img src="paint.jpg" onclick="setBackground('paint.jpg')" />
        <img src="light.jpg" onclick="setBackground('light.jpg')" />
        <img src="heart.jpg" onclick="setBackground('heart.jpg')" />
        <img src="dkhan.jpg" onclick="setBackground('dkhan.jpg')" />
        <img src="airpot.jpg" onclick="setBackground('airpot.jpg')" />
        <img src="3d.jpg" onclick="setBackground('3d.jpg')" />
        <img src="window.jpg" onclick="setBackground('window.jpg')" />
        <img src="market.jpg" onclick="setBackground('market.jpg')" />
        <img src="bleu.jpg" onclick="setBackground('bleu.jpg')" />
        <img src="basket.jpg" onclick="setBackground('basket.jpg')" />
        <img src="money.jpg" onclick="setBackground('money.jpg')" />
        <img src="fellies1.jpg" onclick="setBackground('fellies1.jpg')" />
        <img src="landscap.jpg" onclick="setBackground('landsscap.jpg')" />
        <img src="blur5.jpg" onclick="setBackground('blur5.jpg')" />
        <img src="blur1.jpg" onclick="setBackground('blur1.jpg')" />
        <img src="blur2.jpg" onclick="setBackground('blur2.jpg')" />
        <img src="blur3.jpg" onclick="setBackground('blur3.jpg')" />
        <img src="blur4.jpg" onclick="setBackground('blur4.jpg')" />
        <img src="dkhan1.jpg" onclick="setBackground('dkhan1.jpg')" />
        <img src="black.jpg" onclick="setBackground('black.jpg')" />
        <img src="fleur.jpg" onclick="setBackground('fleur.jpg')" />
        <img src="fleurs.jpg" onclick="setBackground('fleurs.jpg')" />
        <img src="forest.jpg" onclick="setBackground('forest.jpg')" />
        <img src="nature.jpg" onclick="setBackground('nature.jpg')" />
        <img src="nature1.jpg" onclick="setBackground('nature1.jpg')" />
        <img src="car.jpg" onclick="setBackground('car.jpg')" />
        <img src="city.jpg" onclick="setBackground('city.jpg')" />
        <img src="braind.jpg" onclick="setBackground('braind.jpg')" />
        <img src="archit.jpg" onclick="setBackground('archit.jpg')" />
        <img src="archit1.jpg" onclick="setBackground('archit1.jpg')" />
        <img src="fire.jpg" onclick="setBackground('fire.jpg')" />
        <img src="tableau1.jpg" onclick="setBackground('tableau1.jpg')" />
        <img src="green.jpg" onclick="setBackground('green.jpg')" />
        <img src="bord.jpg" onclick="setBackground('bord.jpg')" />
        <img src="grid.jpg" onclick="setBackground('grid.jpg')" />
        <img src="sable.jpg" onclick="setBackground('sable.jpg')" />
        <img src="starts.jpg" onclick="setBackground('starts.jpg')" />
        <img src="yellow.jpg" onclick="setBackground('yellow.jpg')" />
        <img src="tokyo.jpg" onclick="setBackground('tokyo.jpg')" />
        <img src="bleuray.jpg" onclick="setBackground('bleuray.jpg')" />
        <img src="paper1.jpg" onclick="setBackground('paper1.jpg')" />
        <img src="white.jpg" onclick="setBackground('white.jpg')" />
        <img src="white1.jpg" onclick="setBackground('white1.jpg')" />
        <img src="wather.jpg" onclick="setBackground('wather.jpg')" />
      </div>

<!-- HTML لإنشاء البطاقة -->
<div class="play">
  <h1>Preview</h1>
  <button id="previewButton" type="button"><i class='bx bx-play' style=" margin-left: 6px; font-size: 50px; margin-top: -10px;"></i></button>
</div>
<div id="previewCard" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); border:1px solid rgb(70, 70, 70); padding:10px; background:white; box-shadow:0 0 10px rgba(0,0,0,0.5);">
    <canvas id="previewCanvas" width="700" height="500"></canvas>
    <button id="closbutton"  onclick="closePreview()">إغلاق</button>
</div>
 
    <script>
        const canvas = new fabric.Canvas('canvas');
        let history = [canvas.toJSON()]; // Array to store the history of canvas changes
        let clipboard = null; // Variable to store the copied object
        let isBrushEnabled = false; // Flag to indicate if drawing mode is enabled
        let isEraserEnabled = false; // Flag to indicate if eraser mode is enabled

        function addShape() {
            const shapeType = document.getElementById('shapeType').value;
            const color = document.getElementById('colorPicker').value;
            const size = parseInt(document.getElementById('sizePicker').value);
            const opacity = parseFloat(document.getElementById('opacitySlider').value);
            let shape;
            switch (shapeType) {
                case 'square':
                    shape = new fabric.Rect({
                        left: 100,
                        top: 100,
                        width: size,
                        height: size,
                        fill: color,
                        opacity: opacity,
                        selectable: true
                    });
                    break;
                case 'circle':
                    shape = new fabric.Circle({
                        left: 100,
                        top: 100,
                        radius: size / 2,
                        fill: color,
                        opacity: opacity,
                        selectable: true
                    });
                    break;
                case 'triangle':
                    shape = new fabric.Triangle({
                        left: 100,
                        top: 100,
                        width: size,
                        height: size,
                        fill: color,
                        opacity: opacity,
                        selectable: true
                    });
                    break;
        
                case 'line':
                    shape = new fabric.Line([100, 100, 200, 200], {
                        stroke: color,
                        opacity: opacity,
                        selectable: true
                    });
                    break;
                case 'arrow':
                    shape = new fabric.Triangle({
                        left: 100,
                        top: 100,
                        width: size,
                        height: size / 2,
                        fill: color,
                        opacity: opacity,
                        angle: 90,
                        selectable: true
                    });
                    break;
                case 'cylinder':
                    shape = new fabric.Rect({
                        left: 100,
                        top: 100,
                        width: size,
                        height: size / 2,
                        fill: color,
                        opacity: opacity,
                        rx: size / 2, // لجعل الأسطوانة دائرية
                        selectable: true
                    });
                    break;  
                case 'pyramid':
                    shape = new fabric.Polygon([
                        { x: 100, y: 100 },
                        { x: 100 + size, y: 100 },
                        { x: 100 + size / 2, y: 100 + size },
                    ], {
                        fill: color,
                        opacity: opacity,
                        selectable: true
                    });
                    break;
            }
            canvas.add(shape);
            addToHistory();
        }

        function addImage() {
            const file = document.getElementById('imageUploader').files[0];
            const reader = new FileReader();
            reader.onload = function(event) {
                fabric.Image.fromURL(event.target.result, img => {
                    img.set({
                        left: 100,
                        top: 100,
                        selectable: true
                    });
                    canvas.add(img);
                    addToHistory();
                });
            };
            reader.readAsDataURL(file);
        }

        function addVideo() {
            const file = document.getElementById('videoUploader').files[0];
            const reader = new FileReader();
            reader.onload = function(event) {
                const videoElement = document.createElement('video');
                videoElement.src = event.target.result;
                videoElement.controls = true;
                videoElement.crossOrigin = "anonymous";
                videoElement.onloadedmetadata = function() {
                    const video = new fabric.Image(videoElement, {
                        left: 100,
                        top: 100,
                        width: this.videoWidth,
                        height: this.videoHeight,
                        selectable: true
                    });
                    canvas.add(video);
                    addToHistory();
                };
            };
            reader.readAsDataURL(file);
        }
        
        function addText() {
            const text = document.getElementById('text').value;
            const textColor = document.getElementById('colorPicker').value;
            const fontType = document.getElementById('fontType').value;
            const textObject = new fabric.Text(text, {
                left: 100,
                top: 100,
                fill: textColor,
                selectable: true,
                fontFamily: fontType
            });
            canvas.add(textObject);
            addToHistory();
        }

        function setFont() {
            const activeObject = canvas.getActiveObject();
            if (activeObject && activeObject.type === 'text') {
                const fontType = document.getElementById('fontType').value;
                activeObject.set('fontFamily', fontType);
                canvas.renderAll();
                addToHistory();
            }
        }



 
        
        function animateShape() {
            const animationType = document.getElementById('animationType').value;
            const activeObject = canvas.getActiveObject();
            if (activeObject) {
                const animationOptions = {
                    onChange: canvas.renderAll.bind(canvas),
                    duration: 1000,
                    easing: fabric.util.ease.easeInOutBack
                };
                switch (animationType) {
                    case 'scale':
                        activeObject.animate('scaleX', activeObject.scaleX === 1 ? 1.5 : 1, animationOptions);
                        activeObject.animate('scaleY', activeObject.scaleY === 1 ? 1.5 : 1, animationOptions);
                        break;
                    case 'opacity':
                        activeObject.animate('opacity', activeObject.opacity === 1 ? 0.5 : 1, animationOptions);
                        break;
                    case 'top':
                        activeObject.animate('top', activeObject.top === 100 ? 200 : 100, animationOptions);
                        break;
                    case 'left':
                        activeObject.animate('left', activeObject.left === 100 ? 200 : 100, animationOptions);
                        break;
                    case 'flipX':
                        activeObject.animate('flipX', !activeObject.flipX, animationOptions);
                        break;
                    case 'bounce':
                        activeObject.animate('top', activeObject.top === 100 ? 200 : 100, {
                            onChange: canvas.renderAll.bind(canvas),
                            duration: 500,
                            easing: fabric.util.ease.easeOutBounce
                        });
                        break;
                    case 'shake':
                        activeObject.animate('left', activeObject.left === 100 ? 110 : 90, {
                            onChange: canvas.renderAll.bind(canvas),
                            duration: 100,
                            easing: fabric.util.ease.easeInOutCubic,
                            onComplete: () => {
                                activeObject.animate('left', 100, {
                                    onChange: canvas.renderAll.bind(canvas),
                                    duration: 100,
                                    easing: fabric.util.ease.easeInOutCubic
                                });
                            }
                        });
                        break;
                }
                addToHistory();
            }
        }

        function loadDesign() {
            const file = document.getElementById('designUploader').files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    canvas.loadFromJSON(event.target.result, canvas.renderAll.bind(canvas));
                };
                reader.readAsText(file);
                addToHistory();
            }
        }

        function changeBackgroundColor() {
            const color = document.getElementById('backgroundPicker').value;
            canvas.backgroundColor = color;
            canvas.renderAll();
            addToHistory();
        }

        function moveUp() {
            const activeObject = canvas.getActiveObject();
            if (activeObject) {
                canvas.bringToFront(activeObject);
                canvas.renderAll();
                addToHistory();
            }
        }

        function moveDown() {
            const activeObject = canvas.getActiveObject();
            if (activeObject) {
                canvas.sendToBack(activeObject);
                canvas.renderAll();
                addToHistory();
            }
        }

        function deleteObject() {
            const activeObject = canvas.getActiveObject();
            if (activeObject) {
                canvas.remove(activeObject);
                canvas.renderAll();
                addToHistory();
            }
        }

        function copyObject() {
            const activeObject = canvas.getActiveObject();
            if (activeObject) {
                activeObject.clone(cloned => {
                    clipboard = cloned;
                    canvas.renderAll();
                });
            }
        }

        function pasteObject() {
            if (clipboard) {
                clipboard.clone(clonedObj => {
                    canvas.add(clonedObj);
                    clipboard = clonedObj;
                    canvas.renderAll();
                    addToHistory();
                });
            }
        }

        function exportDesign() {
            const json = JSON.stringify(canvas.toJSON());
            const blob = new Blob([json], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'design.json';
            a.click();
        }

        function displayDesign() {
            const json = JSON.stringify(canvas.toJSON());
            const win = window.open('', '_blank');
            win.document.body.innerText = json;
        }

        function downloadImage() {
            html2canvas(canvas, {
                backgroundColor: null
            }).then(canvas => {
                const link = document.createElement('a');
                link.href = canvas.toDataURL();
                link.download = 'canvas.png';
                link.click();
            });
        }

        function downloadVideo() {
            const out = document.createElement('canvas');
            const encoder = new Whammy.Video(30);
            const stream = out.captureStream();
            const videoStream = stream.addTrack(canvas.captureStream().getVideoTracks()[0]);
            const recorder = new MediaRecorder(videoStream);
            recorder.ondataavailable = event => encoder.add(event.data);
            recorder.onstop = () => encoder.compile(false, blob => {
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'canvas.mp4';
                link.click();
            });
            recorder.start();
            setTimeout(() => recorder.stop(), 5000); // Stop recording after 5 seconds
        }

            function downloadPNG() {
            const imageDataURL = canvas.toDataURL('image/png', 1.0);
            const link = document.createElement('a');
            link.href = canvas.toDataURL();
            link.download = 'canvas.png';
            link.click();
        }

        function enableBrush() {
            isBrushEnabled = true;
            isEraserEnabled = false;
            canvas.isDrawingMode = true;
            canvas.freeDrawingBrush.color = document.getElementById('colorPicker').value;
            canvas.freeDrawingBrush.width = parseInt(document.getElementById('brushSize').value);
        }

        function enableEraser() {
            isBrushEnabled = false;
            isEraserEnabled = true;
            canvas.isDrawingMode = true;
            canvas.freeDrawingBrush.color = document.getElementById('backgroundPicker').value;
            canvas.freeDrawingBrush.width = parseInt(document.getElementById('brushSize').value);
        }

        function undo() {
            if (history.length > 1) {
                history.pop();
                canvas.loadFromJSON(history[history.length - 1]);
                canvas.renderAll();
            }
        }

        function redo() {
            // Redo functionality is not implemented in this example.
        }

        function addToHistory() {
            history.push(canvas.toJSON());
        }

        function addLight() {
            const color = document.getElementById('lightColorPicker').value;
            const light = new fabric.Circle({
                left: 100,
                top: 100,
                radius: 10,
                fill: color,
                opacity: 0.5,
                selectable: true,
                shadow: {
                    color: color,
                    blur: 20,
                    offsetX: 0,
                    offsetY: 0
                }
            });
            canvas.add(light);
            addToHistory();
        }

        function addShadow() {
            const color = document.getElementById('shadowColorPicker').value;
            const shadow = new fabric.Circle({
                left: 100,
                top: 100,
                radius: 10,
                fill: color,
                opacity: 0.5,
                selectable: true,
                shadow: {
                    color: color,
                    blur: 20,
                    offsetX: 10,
                    offsetY: 10
                }
            });
            canvas.add(shadow);
            addToHistory();
        }

        function breakApart() {
            const activeObject = canvas.getActiveObject();
            if (activeObject) {
                activeObject.set({
                    dirty: true
                });
                activeObject._objects.forEach(obj => {
                    obj.left += activeObject.left;
                    obj.top += activeObject.top;
                    obj.setCoords();
                    canvas.add(obj);
                });
                canvas.remove(activeObject);
                canvas.renderAll();
                addToHistory();
            }
        }

        function distortShape() {
            const activeObject = canvas.getActiveObject();
            if (activeObject) {
                activeObject.set({
                    dirty: true
                });
                const scaleX = Math.random() * 2;
                const scaleY = Math.random() * 2;
                activeObject.scaleX = scaleX;
                activeObject.scaleY = scaleY;
                canvas.renderAll();
                addToHistory();
            }
        }


      function makeTextTransparent() {
            const activeObject = canvas.getActiveObject();
            if (activeObject && activeObject.type === 'text') {
                activeObject.set({
                    fill: 'transparent', // جعل لون النص شفافًا
                    stroke: activeObject.fill, // استخدام لون النص كلون للحواف
                    strokeWidth: 1 // ضبط عرض الحواف
                });
                canvas.renderAll();
                addToHistory();
            }
        }
        

          
        function make3D() {
            const activeObject = canvas.getActiveObject();
            if (activeObject && activeObject.type === 'text') {
                activeObject.set({
                    extrude: 10, // تحديد الثلاثي الأبعاد
                    angle: 30, // زاوية الميلان
                    shadow: new fabric.Shadow({ color: 'rgba(0,0,0,0.5)', offsetX: 2, offsetY: 2, blur: 5 }), // إضافة تأثير الظل
                    fill: '', // جعل الخط شفافًا
                    stroke: 'black', // لون حواف الخط
                    strokeWidth: 1 // عرض حواف الخط
                });
                canvas.renderAll();
            }
        }

   



     
        function make3D() {
            const activeObject = canvas.getActiveObject();
            if (activeObject && activeObject.type === 'text') {
                let totalSkew = 0;
                let skewIncrement = -9; // قيمة الزيادة في الانحراف في كل مرة
                let shadowOffsetIncrement = 3; // قيمة الزيادة في إزاحة الظلال في كل مرة
                let shadowBlurIncrement = 3; // قيمة الزيادة في حدة الظلال في كل مرة
                let fillIncrement = 8; // زيادة في الإمتلاء في كل مرة
                let reflectivityIncrement = 0.1; // زيادة في اللمعان في كل مرة
                
                // إنشاء النسخة الأصلية
                activeObject.clone(function(clonedOriginal) {
                    canvas.add(clonedOriginal);
                    clonedOriginal.set({
                        dirty: true // تجاهل التخزين المؤقت لتطبيق التغييرات بشكل فوري
                    });
                    
                    // تعديل النسخة الأصلية
                    clonedOriginal.set({
                        left: clonedOriginal.left, // البقاء في نفس المكان
                        skewX: 0, // لا يوجد انحراف أفقي هنا
                        skewY: 0, // لا يوجد انحراف رأسي هنا
                        skewZ: 0, // لا يوجد انحراف عمقي هنا
                        shadow: { // ضبابية
                            color: 'rgba(0, 0, 0, 0.3)', // لون الظلال الخافت
                            offsetX: 5, // زيادة تنازلية لإزاحة أفقية للظلال لليمين
                            offsetY: 5, // زيادة تنازلية لإزاحة رأسية للظلال للأسفل
                            blur: 3 // حدة الظلال الخافتة
                        },
                        fill: activeObject.fill, // اللون الأصلي
                        stroke: activeObject.stroke, // لون الحواف الأصلي
                        strokeWidth: activeObject.strokeWidth, // عرض الحواف الأصلي
                        strokeLineJoin: 'round', // نوع الانضمام للحواف
                        strokeLineCap: 'round' // شكل نهاية الحواف
                    });
        
                    // إنشاء النسخ بالتناوب
                    for (let i = 1; i <= 30; i++) { // يمكنك تعديل هذا الرقم حسب عدد الانحرافات المرغوب فيها
                        activeObject.clone(function(cloned) {
                            canvas.add(cloned);
                            cloned.set({
                                left: clonedOriginal.left + i * -10, // زيادة التموضع لليمين بشكل منحني
                                skewX: -totalSkew, // اتجاه الانحراف لليسار
                                skewY: 0, // لا يوجد انحراف رأسي هنا
                                skewZ: 0, // لا يوجد انحراف عمقي هنا
                                shadow: { // ضبابية
                                    color: 'rgba(0, 0, 0, ' + (0.1 + (i * shadowBlurIncrement / 100)) + ')', // زيادة تنازلية في حدة الظلال
                                    offsetX: -i * shadowOffsetIncrement, // زيادة تنازلية لإزاحة أفقية للظلال لليسار
                                    offsetY: i * shadowOffsetIncrement, // زيادة تنازلية لإزاحة رأسية للظلال للأسفل
                                    blur: i * shadowBlurIncrement // زيادة تنازلية لحدة الظلال
                                },
                                fill: 'rgba(255, 255, 255, ' + (0.25 - (i * fillIncrement / 100)) + ')', // تناقص قيمة الشفافية
                                stroke: activeObject.stroke, // لون الحواف الأصلي
                                strokeWidth: activeObject.strokeWidth, // عرض الحواف الأصلي
                                strokeLineJoin: 'round', // نوع الانضمام للحواف
                                strokeLineCap: 'round', // شكل نهاية الحواف
                                dirty: true // تجاهل التخزين المؤقت لتطبيق التغييرات بشكل فوري
                            });
                            totalSkew += skewIncrement;
                            shadowBlurIncrement += 1; // تزايد قيمة زيادة حدة الظلال
                        });
                    }
                });
        
                addToHistory();
            }
        }
        
        

        let selectedIcon = null;

function togglePopup() {
  const popup = document.getElementById('popup');
  popup.style.display = popup.style.display === 'none' ? 'block' : 'none';
}

function selectIcon(iconClass) {
  const iconUnicode = getIconUnicode(iconClass);
  selectedIcon = new fabric.IText(iconUnicode, {
    left: 100,
    top: 100,
    fontFamily: 'boxicons',
    fontSize: 80,
    fill: '#000000' // Default color
  });
  
  canvas.add(selectedIcon);
  togglePopup();
}

function changeIconColor() {
  if (selectedIcon) {
    const colorPicker = document.getElementById('iconColorPicker');
    const newColor = colorPicker.value;
    selectedIcon.set('fill', newColor);
    canvas.renderAll();
  }
}

function getIconUnicode(iconClass) {
  const iconElement = document.createElement('i');
  iconElement.className = iconClass;
  document.body.appendChild(iconElement);
  const iconUnicode = window.getComputedStyle(iconElement, ':before').content;
  document.body.removeChild(iconElement);
  return iconUnicode.replace(/"/g, ''); // Remove quotes
}
    

    

function applyFilter() {
    const filterType = document.getElementById('filterType').value;
    const filterValue = parseInt(document.getElementById('filterValue').value);
    switch (filterType) {
        case 'sepia':
            applySepia();
            break;
        case 'blur':
            applyBlur(filterValue);
            break;
        case 'shadow':
            applyShadow(filterValue);
            break;
            case 'darkness': // Add case for Darkness filter
            applyDarkness();
            break;
        default:
            break;

    }
}

function applyDarkness() {
    const activeObject = canvas.getActiveObject();
    if (activeObject && activeObject.isType('image')) {
        const darknessFilter = new fabric.Image.filters.Darkness();
        activeObject.filters.push(darknessFilter);
        activeObject.applyFilters();
        canvas.renderAll();
    } else {
        console.error('الرجاء تحديد صورة لتطبيق الفلتر عليها');
    }
}

function applySepia() {
    const activeObject = canvas.getActiveObject();
    if (activeObject && activeObject.isType('image')) {
        const sepiaFilter = new fabric.Image.filters.Sepia();
        activeObject.filters.push(sepiaFilter);
        activeObject.applyFilters();
        canvas.renderAll();
    } else {
        console.error('الرجاء تحديد صورة لتطبيق الفلتر عليها');
    }
}

function applyBlur(blurValue) {
    const activeObject = canvas.getActiveObject();
    if (activeObject && activeObject.isType('image')) {
        const blurFilter = new fabric.Image.filters.Convolute({
            matrix: [
                1 / 16, 1 / 8, 1 / 16,
                1 / 8,  1 / 4, 1 / 8,
                1 / 16, 1 / 8, 1 / 16
            ]
        });
        activeObject.filters.push(blurFilter);
        activeObject.applyFilters();
        canvas.renderAll();
    }
}

function applyShadow(shadowValue) {
    const activeObject = canvas.getActiveObject();
    if (activeObject && activeObject.isType('image')) {
        // اعتمادًا على المعلمات المطلوبة لتطبيق الظل
        const offset = 5; // تغيير هذه القيمة حسب رغبة المستخدم
        const blur = shadowValue; // تغيير هذه القيمة حسب رغبة المستخدم
        const color = [0, 0, 0, 0.5]; // تغيير هذه القيمة حسب رغبة المستخدم
        applyShadowFilter(offset, blur, color);
    } else {
        console.error('الرجاء تحديد صورة لتطبيق الفلتر عليها');
    }
}

function applyShadowFilter(offset, blur, color) {
    const activeObject = canvas.getActiveObject();
    if (activeObject && activeObject.isType('image')) {
        activeObject.filters.push(new ShadowFilter({ shadowOffset: offset, shadowBlur: blur, shadowColor: color }));
        activeObject.applyFilters();
        canvas.renderAll();
    } else {
        console.error('الرجاء تحديد صورة لتطبيق الفلتر عليها');
    }
}

function setBackground(imageSrc) {
  var canvas = document.getElementById('canvas');
  var context = canvas.getContext('2d');
  var img = new Image();
  img.onload = function() {
    context.drawImage(img, 0, 0, canvas.width, canvas.height);
  };
  img.src = imageSrc;
}

 
 function showPreview() {
    var originalCanvas = document.getElementById('canvas');
    var previewCanvas = document.getElementById('previewCanvas');
    var previewCtx = previewCanvas.getContext('2d');
    
    // تعيين الأبعاد لـ previewCanvas بناءً على الأبعاد الأصلية لـ originalCanvas
    previewCanvas.width = originalCanvas.width;
    previewCanvas.height = originalCanvas.height;

    // نسخ المحتوى من الـ originalCanvas إلى previewCanvas
    previewCtx.drawImage(originalCanvas, 0, 0, previewCanvas.width, previewCanvas.height);

    // عرض البطاقة
    document.getElementById('previewCard').style.display = 'block';
}

function closePreview() {
    // إخفاء البطاقة
    document.getElementById('previewCard').style.display = 'none';
}

// ربط الدالة showPreview بالزر
document.getElementById('previewButton').addEventListener('click', showPreview);



document.getElementById('loadButton').addEventListener('click', function() {
    const fileInput = document.getElementById('fileInput');
    const file = fileInput.files[0];
    
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            const content = sanitizeHTML(e.target.result);
            displayOnCanvas(content);
        };
        reader.readAsText(file);
    } else {
        alert('Please select a file first.');
    }
});

function sanitizeHTML(html) {
    // تنظيف HTML باستخدام DOMPurify
    return DOMPurify.sanitize(html);
}

function displayOnCanvas(htmlContent) {
    const iframe = document.createElement('iframe');
    document.body.appendChild(iframe);
    
    iframe.style.position = 'relative';
    iframe.style.left = '-99px';
    iframe.srcdoc = htmlContent;

    iframe.onload = function() {
        html2canvas(iframe.contentDocument.body).then(canvas => {
            const imgData = canvas.toDataURL('image/png');
            const fabricCanvas = new fabric.Canvas('canvas');
            fabric.Image.fromURL(imgData, function(img) {
                fabricCanvas.add(img);
                img.scaleToWidth(fabricCanvas.width);
                img.scaleToHeight(fabricCanvas.height);
            });
            document.body.removeChild(iframe);
        });
    };
}

        
    </script>
      <footer>
        <div class="social">
          <a href="https://www.facebook.com/Simo.lbou3?mibextid=ZbWKwL"><i class='bx bxl-facebook bx-tada bx-flip-vertical' style=" color: #fff;"></i></a>
          <a href="https://whatsapp.com/channel/0029Va29keX11ulJKqdPts1n"><i class='bx bxl-whatsapp bx-tada' style=" color: #fff;"></i></a>
          <a href="https://www.instagram.com/simo_elb_3?igsh=MTVsYnlvZTlpaWVxdw=="><i class='bx bxl-instagram bx-tada' style=" color: #fff;"></i></a>
          <a href="https://youtube.com/@elbousimo1701?si=MXOeu4urBbPDc4kq"><i class='bx bxl-youtube' style=" color: #fff;"></i></a>
        </div>
        <div class="copy">
          <p>© 2024 SM.Studio. All rights reserved.</p>
        </div>
        </footer>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
</body>
</html>

